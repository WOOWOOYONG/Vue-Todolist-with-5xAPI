(function(){"use strict";var o={1073:function(o,e,t){var n=t(9242),s=t(3494),i=t(7749),l=t(8429),a=t(2483),r=t(3396),d=t(7139);const c={class:"home mx-auto max-w-[1920px]"},u=(0,r._)("h1",{class:"mb-20 text-3xl font-bold"},"歡迎來到你的待辦清單",-1),h={class:"flex justify-center gap-4"},m=(0,r._)("div",{class:"max-w-[20%]"},[(0,r._)("img",{src:"https://i.pinimg.com/originals/73/e4/26/73e4261f0cf991cdca702c53bba90597.gif",alt:"cover",class:"h-auto max-w-full rounded-xl"})],-1),g={class:"w-1/6"},p={key:0},f={key:1},w={class:"px-8"};function b(o,e,t,n,s,i){const l=(0,r.up)("LogIn"),a=(0,r.up)("SignUp");return(0,r.wg)(),(0,r.iD)("div",c,[u,(0,r._)("div",h,[m,(0,r._)("div",g,[s.showLogin?((0,r.wg)(),(0,r.iD)("div",p,[(0,r.Wm)(l)])):((0,r.wg)(),(0,r.iD)("div",f,[(0,r.Wm)(a,{"show-login":s.showLogin,"onUpdate:showLogin":i.updateShowLogin},null,8,["show-login","onUpdate:showLogin"])])),(0,r._)("div",w,[(0,r._)("button",{class:"w-full bg-slate-200 py-2",onClick:e[0]||(e[0]=o=>s.showLogin=!s.showLogin)},(0,d.zw)(s.showLogin?"註冊新帳號":"返回登入頁"),1)])])])])}const v={class:"mb-5"},_={for:"loginEmail"},x=(0,r._)("p",{class:"labeltxt"},"Email:",-1),y=(0,r._)("span",{class:"loginEmail-msg"},null,-1),T={class:"mb-6"},k={for:"loginPassword"},L=(0,r._)("p",{class:"labeltxt"},"密碼:",-1),U=(0,r._)("span",{class:"loginPassword-msg"},null,-1),E={class:"px-8"};function P(o,e,t,s,i,l){return(0,r.wg)(),(0,r.iD)("div",{onKeyup:e[3]||(e[3]=(0,n.D2)(((...o)=>l.handleLogin&&l.handleLogin(...o)),["enter"]))},[(0,r._)("form",null,[(0,r._)("div",v,[(0,r._)("label",_,[x,(0,r.wy)((0,r._)("input",{type:"email",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入Email",name:"loginEmail","onUpdate:modelValue":e[0]||(e[0]=o=>i.loginEmail=o)},null,512),[[n.nr,i.loginEmail,void 0,{trim:!0}]])]),y]),(0,r._)("div",T,[(0,r._)("label",k,[L,(0,r.wy)((0,r._)("input",{type:"password",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入密碼",name:"loginPassword","onUpdate:modelValue":e[1]||(e[1]=o=>i.loginPassword=o)},null,512),[[n.nr,i.loginPassword,void 0,{trim:!0}]])]),U]),(0,r._)("div",E,[(0,r._)("button",{type:"button",class:"mb-5 block w-full rounded bg-green-300 py-2 text-center",onClick:e[2]||(e[2]=(...o)=>l.handleLogin&&l.handleLogin(...o))}," 登入 ")])])],32)}t(7658);var C=t(4161),S=t(2492),D=t.n(S);const N=D().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",D().stopTimer),o.addEventListener("mouseleave",D().resumeTimer)}}),O=o=>{N.fire({icon:"success",title:o})},Z=o=>{N.fire({icon:"success",title:o})},I=()=>{N.fire({icon:"success",title:"新增成功"})},W=()=>{N.fire({icon:"success",title:"刪除成功"})},$=()=>{N.fire({icon:"success",title:"更改狀態成功"})},A=()=>{N.fire({icon:"success",title:"登出成功"})},B=D().mixin({title:"請確認",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}),j=o=>{B.fire({text:"是否確定刪除所有已完成事項？"}).then((e=>{e.isConfirmed&&o()}))},F=()=>{D().fire("刪除成功","已清除所有已完成事項","success")},V=()=>{D().fire("錯誤！","請先填寫正確資料","error")},z=()=>{D().fire("錯誤！","目前沒有完成事項","error")},H="https://todoo.5xcamp.us",K=o=>C.Z.post(`${H}/users`,o),M=o=>C.Z.post(`${H}/users/sign_in`,o),q=(o,e)=>{C.Z["delete"](`${H}/users/sign_out`,o).then((o=>{200===o.status&&(A(),localStorage.removeItem("userToken"),localStorage.removeItem("userNickName"),e())})).catch((o=>{console.log(o)}))},Q=o=>C.Z.get(`${H}/todos`,o),G=(o,e)=>C.Z.post(`${H}/todos`,o,e),Y=(o,e)=>C.Z["delete"](`${H}/todos/${o}`,e),J=(o,e)=>C.Z.patch(`${H}/todos/${o}/toggle`,{},e),R=(o,e,t)=>{let n=0;o.forEach((s=>{Y(s.id,e).then((()=>{n+=1,n===o.length&&(F(),t())})).catch((o=>{console.log(o)}))}))};var X={name:"Log-in",data(){return{loginEmail:"",loginPassword:""}},methods:{resetForm(){this.loginEmail="",this.loginPassword=""},handleLogin(){if(this.loginEmail&&this.loginPassword){const o={user:{email:this.loginEmail,password:this.loginPassword}};M(o).then((o=>{O(o.data.message),localStorage.setItem("userToken",o.headers.authorization),localStorage.setItem("userNickname",o.data.nickname),this.resetForm(),this.$router.push({name:"todo"})})).catch((o=>{console.log(o)}))}else V()}}},oo=t(89);const eo=(0,oo.Z)(X,[["render",P]]);var to=eo;const no={class:"loginForm"},so={class:"mb-5"},io={for:"signUpEmail"},lo=(0,r._)("p",{class:"labeltxt"},"Email:",-1),ao=(0,r._)("span",null,null,-1),ro={class:"mb-5"},co={for:"nickName"},uo=(0,r._)("p",{class:"labeltxt"},"暱稱:",-1),ho=(0,r._)("span",null,null,-1),mo={class:"mb-5"},go={for:"signUpPassword"},po=(0,r._)("p",{class:"labeltxt"},"密碼:",-1),fo=(0,r._)("span",null,null,-1),wo={class:"mb-8"},bo={for:"confirmPassword"},vo=(0,r._)("p",{class:"labeltxt"},"再次輸入密碼:",-1),_o=(0,r._)("span",null,null,-1),xo={class:"px-8"};function yo(o,e,t,s,i,l){return(0,r.wg)(),(0,r.iD)("div",{onKeyup:e[5]||(e[5]=(0,n.D2)(((...o)=>l.handleSignUp&&l.handleSignUp(...o)),["enter"]))},[(0,r._)("form",no,[(0,r._)("div",so,[(0,r._)("label",io,[lo,(0,r.wy)((0,r._)("input",{type:"email",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入Email",name:"signUpEmail","onUpdate:modelValue":e[0]||(e[0]=o=>i.signUpEmail=o)},null,512),[[n.nr,i.signUpEmail,void 0,{trim:!0}]])]),ao]),(0,r._)("div",ro,[(0,r._)("label",co,[uo,(0,r.wy)((0,r._)("input",{type:"text",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入暱稱",name:"nickName","onUpdate:modelValue":e[1]||(e[1]=o=>i.nickName=o)},null,512),[[n.nr,i.nickName,void 0,{trim:!0}]])]),ho]),(0,r._)("div",mo,[(0,r._)("label",go,[po,(0,r.wy)((0,r._)("input",{type:"password",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入密碼",name:"signUpPassword","onUpdate:modelValue":e[2]||(e[2]=o=>i.signUpPassWord=o)},null,512),[[n.nr,i.signUpPassWord,void 0,{trim:!0}]])]),fo]),(0,r._)("div",wo,[(0,r._)("label",bo,[vo,(0,r.wy)((0,r._)("input",{type:"password",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請再次輸入密碼",name:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=o=>i.confirmPassword=o)},null,512),[[n.nr,i.confirmPassword,void 0,{trim:!0}]])]),_o]),(0,r._)("div",xo,[(0,r._)("button",{type:"button",class:"mb-5 block w-full rounded bg-green-300 py-2 text-center",onClick:e[4]||(e[4]=(...o)=>l.handleSignUp&&l.handleSignUp(...o))}," 註冊 ")])])],32)}var To={name:"Sign-Up",props:["showLogin"],data(){return{signUpEmail:"",nickName:"",signUpPassWord:"",confirmPassword:"",showLoginForm:this.showLogin}},methods:{resetForm(){this.signUpEmail="",this.nickName="",this.signUpPassWord="",this.confirmPassword=""},handleSignUp(){if(this.signUpEmail&&this.nickName&&this.signUpPassWord&&this.confirmPassword){const o={user:{email:this.signUpEmail,nickname:this.nickName,password:this.signUpPassWord}};K(o).then((o=>{Z(o.data.message),this.resetForm(),this.moveToLogin()})).catch((o=>console.log(o)))}else V()},moveToLogin(){this.showLoginForm=!0,this.$emit("update:showLogin",this.showLoginForm)}}};const ko=(0,oo.Z)(To,[["render",yo]]);var Lo=ko,Uo={name:"HomeView",components:{LogIn:to,SignUp:Lo},data(){return{showLogin:!0}},methods:{updateShowLogin(o){this.showLogin=o}}};const Eo=(0,oo.Z)(Uo,[["render",b]]);var Po=Eo;const Co={class:"max-w-7xl mx-auto"};function So(o,e,t,n,s,i){const l=(0,r.up)("Todo");return(0,r.wg)(),(0,r.iD)("div",Co,[(0,r.Wm)(l)])}const Do={class:"mx-auto max-w-[30%] text-lg"},No={class:"mb-10 text-xl"},Oo={class:"mb-5 flex justify-center"},Zo={for:"todoInput"},Io={key:0,class:"mt-10"},Wo=(0,r._)("h2",{class:"text-2xl"},"目前沒有待辦事項",-1),$o=[Wo],Ao={key:1},Bo={class:"mb-6 flex justify-center gap-5 rounded border-2 border-slate-200"},jo={class:"mb-10"},Fo={for:"todoItem",class:"flex w-full cursor-pointer items-center p-1 hover:bg-slate-100"},Vo=["data-id","checked"],zo=["data-id"],Ho={class:"flex items-center justify-between border-t-2 pt-4"};function Ko(o,e,t,s,i,l){const a=(0,r.up)("font-awesome-icon"),c=(0,r.up)("LogOutBtn");return(0,r.wg)(),(0,r.iD)("div",Do,[(0,r._)("h1",No,"哈囉 "+(0,d.zw)(i.nickName)+"～ 來做點事吧",1),(0,r._)("div",Oo,[(0,r._)("label",Zo,[(0,r.wy)((0,r._)("input",{type:"text",class:"mr-5 rounded border-2 px-2 py-1 indent-2",placeholder:"請輸入待辦事項","onUpdate:modelValue":e[0]||(e[0]=o=>i.newTodo=o),onKeyup:e[1]||(e[1]=(0,n.D2)(((...o)=>l.handleAddTodo&&l.handleAddTodo(...o)),["enter"]))},null,544),[[n.nr,i.newTodo,void 0,{trim:!0}]])]),(0,r._)("button",{type:"button",class:"rounded border border-slate-700 px-2 py-1 hover:bg-gray-900 hover:text-white",onClick:e[2]||(e[2]=(...o)=>l.handleAddTodo&&l.handleAddTodo(...o))}," 加入 ")]),0===i.todos.length?((0,r.wg)(),(0,r.iD)("div",Io,$o)):((0,r.wg)(),(0,r.iD)("div",Ao,[(0,r._)("ul",Bo,[(0,r._)("li",{class:(0,d.C_)(["w-1/3 cursor-pointer rounded","all"===i.state?"active":""])},[(0,r._)("button",{onClick:e[3]||(e[3]=o=>l.changeTodoState("all")),class:"w-full px-3 py-1"},"全部")],2),(0,r._)("li",{class:(0,d.C_)(["w-1/3 cursor-pointer rounded","undone"===i.state?"active":""])},[(0,r._)("button",{onClick:e[4]||(e[4]=o=>l.changeTodoState("undone")),class:"w-full px-3 py-1"},"待完成")],2),(0,r._)("li",{class:(0,d.C_)(["w-1/3 cursor-pointer rounded","done"===i.state?"active":""])},[(0,r._)("button",{onClick:e[5]||(e[5]=o=>l.changeTodoState("done")),class:"w-full px-3 py-1"},"已完成")],2)]),(0,r._)("div",jo,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filterTodolist,(o=>((0,r.wg)(),(0,r.iD)("li",{key:o.id,class:"mb-3 flex items-center"},[(0,r._)("label",Fo,[(0,r._)("input",{type:"checkbox",id:"todoItem",class:"mr-10 h-5 w-5 cursor-pointer","data-id":o.id,checked:null!==o.completed_at,onClick:e[6]||(e[6]=(...o)=>l.handleToggleTodo&&l.handleToggleTodo(...o))},null,8,Vo),(0,r._)("span",{class:(0,d.C_)([null===o.completed_at?"":"line-through","text-xl"])},(0,d.zw)(o.content),3)]),(0,r._)("button",{"data-id":o.id,onClick:e[7]||(e[7]=(...o)=>l.handleDelTodo&&l.handleDelTodo(...o))},[(0,r.Wm)(a,{icon:["far","rectangle-xmark"],"data-id":o.id,class:"cursor-pointer hover:scale-110 hover:bg-amber-200",size:"lg"},null,8,["data-id"])],8,zo)])))),128))])]),(0,r._)("div",Ho,[(0,r._)("p",null,"目前還有"+(0,d.zw)(i.undoneNum)+"件待完成",1),(0,r._)("button",{onClick:e[8]||(e[8]=(...o)=>l.handleDelAllTodo&&l.handleDelAllTodo(...o)),class:"rounded bg-orange-400 px-2 py-1 font-bold text-white hover:bg-orange-600"}," 清除已完成事項 ")])])),(0,r.Wm)(c,{config:i.config},null,8,["config"])])}const Mo={class:"absolute top-10 right-48"};function qo(o,e,t,n,s,i){return(0,r.wg)(),(0,r.iD)("div",Mo,[(0,r._)("button",{onClick:e[0]||(e[0]=(...o)=>i.handleLogout&&i.handleLogout(...o)),class:"bg-blue-900 py-1 px-2 rounded text-white hover:bg-blue-600"}," 登出 ")])}var Qo={props:["config"],methods:{redirectHome(){this.$router.push({name:"home"})},handleLogout(){console.log(this.config),q(this.config,this.redirectHome)}}};const Go=(0,oo.Z)(Qo,[["render",qo]]);var Yo=Go,Jo={components:{LogOutBtn:Yo},name:"Todo-list",data(){return{token:"",nickName:"",config:"",todos:[],newTodo:"",undoneNum:"",state:"all"}},methods:{getConfig(){this.token=localStorage.getItem("userToken"),this.nickName=localStorage.getItem("userNickname"),this.config={headers:{Authorization:this.token}}},getTodoList(){Q(this.config).then((o=>{this.todos=o.data.todos,this.countUndone()})).catch((o=>console.log(o)))},addTodoList(){const o={todo:{content:this.newTodo}};G(o,this.config).then((()=>{I(),this.getTodoList(),this.newTodo=""})).catch((o=>console.log(o)))},handleAddTodo(){this.newTodo&&this.config?this.addTodoList():V()},handleDelTodo(o){const e=o.target.dataset.id;e&&Y(e,this.config).then((()=>{W(),this.getTodoList()})).catch((o=>console.log(o)))},handleDelAllTodo(){const o=this.todos.filter((o=>null!==o.completed_at));if(o.length>0){const e=()=>{R(o,this.config,this.getTodoList)};j(e)}else z()},handleToggleTodo(o){const e=o.target.dataset.id;J(e,this.config).then((()=>{$(),this.getTodoList(),this.countUndone()})).catch((o=>console.log(o)))},countUndone(){const o=this.todos.filter((o=>null===o.completed_at));this.undoneNum=o.length},changeTodoState(o){this.state=o},setTodoByState(){return"all"===this.state?[...this.todos].reverse():"undone"===this.state?this.todos.filter((o=>null===o.completed_at)).reverse():"done"===this.state?this.todos.filter((o=>null!==o.completed_at)).reverse():[...this.todos].reverse()}},mounted(){this.getConfig(),this.getTodoList()},computed:{filterTodolist(){return this.setTodoByState()}}};const Ro=(0,oo.Z)(Jo,[["render",Ko]]);var Xo=Ro,oe={name:"TodoView",components:{Todo:Xo}};const ee=(0,oo.Z)(oe,[["render",So]]);var te=ee;const ne=[{path:"/",name:"home",component:Po,meta:{title:"MyTodoList-首頁"}},{path:"/todo",name:"todo",component:te,meta:{title:"MyTodoList-待辦事項",requiresAuth:!0}}],se=(0,a.p7)({history:(0,a.r5)(),routes:ne});se.beforeEach(((o,e,t)=>{const n=localStorage.getItem("userToken"),s=o.matched.some((o=>o.meta.requiresAuth));s&&!n?t("/"):t()})),se.beforeEach(((o,e,t)=>{window.document.title=o.meta.title,t()}));var ie=se;const le={class:"mt-28 font-sans"};function ae(o,e){const t=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",le,[(0,r.Wm)(t)])}const re={},de=(0,oo.Z)(re,[["render",ae]]);var ce=de;s.vI.add(l.QQm);const ue=(0,n.ri)(ce);ue.use(ie).component("font-awesome-icon",i.GN).mount("#app")}},e={};function t(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return o[n].call(i.exports,i,i.exports,t),i.exports}t.m=o,function(){var o=[];t.O=function(e,n,s,i){if(!n){var l=1/0;for(c=0;c<o.length;c++){n=o[c][0],s=o[c][1],i=o[c][2];for(var a=!0,r=0;r<n.length;r++)(!1&i||l>=i)&&Object.keys(t.O).every((function(o){return t.O[o](n[r])}))?n.splice(r--,1):(a=!1,i<l&&(l=i));if(a){o.splice(c--,1);var d=s();void 0!==d&&(e=d)}}return e}i=i||0;for(var c=o.length;c>0&&o[c-1][2]>i;c--)o[c]=o[c-1];o[c]=[n,s,i]}}(),function(){t.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return t.d(e,{a:e}),e}}(),function(){t.d=function(o,e){for(var n in e)t.o(e,n)&&!t.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:e[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){t.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)}}(),function(){var o={143:0};t.O.j=function(e){return 0===o[e]};var e=function(e,n){var s,i,l=n[0],a=n[1],r=n[2],d=0;if(l.some((function(e){return 0!==o[e]}))){for(s in a)t.o(a,s)&&(t.m[s]=a[s]);if(r)var c=r(t)}for(e&&e(n);d<l.length;d++)i=l[d],t.o(o,i)&&o[i]&&o[i][0](),o[i]=0;return t.O(c)},n=self["webpackChunkmy_todolist"]=self["webpackChunkmy_todolist"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(1073)}));n=t.O(n)})();
//# sourceMappingURL=app.b6c2e710.js.map