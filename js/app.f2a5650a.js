(function(){"use strict";var e={927:function(e,o,t){var n=t(9242),s=t(3494),i=t(7749),a=t(8429),l=t(2483),r=t(3396),d=t(7139);const c={class:"home mx-auto max-w-[1920px]"},u=(0,r._)("h1",{class:"mb-20 text-3xl font-bold"},"歡迎來到你的待辦清單",-1),m={class:"mx-auto flex max-w-[80%] flex-col items-center justify-center gap-2 md:flex-row md:items-start md:gap-6 lg:max-w-[40%]"},h=(0,r._)("div",{class:"w-full md:w-[50%]"},[(0,r._)("img",{src:"https://i.pinimg.com/originals/73/e4/26/73e4261f0cf991cdca702c53bba90597.gif",alt:"cover",class:"h-auto max-w-full rounded-xl"})],-1),p={class:"w-full md:w-[50%]"},g={key:0},f={key:1},w={class:"px-8"};function v(e,o,t,n,s,i){const a=(0,r.up)("LogIn"),l=(0,r.up)("SignUp");return(0,r.wg)(),(0,r.iD)("div",c,[u,(0,r._)("div",m,[h,(0,r._)("div",p,[s.showLogin?((0,r.wg)(),(0,r.iD)("div",g,[(0,r.Wm)(a)])):((0,r.wg)(),(0,r.iD)("div",f,[(0,r.Wm)(l,{"show-login":s.showLogin,"onUpdate:showLogin":i.updateShowLogin},null,8,["show-login","onUpdate:showLogin"])])),(0,r._)("div",w,[(0,r._)("button",{class:"w-full bg-slate-200 py-2",onClick:o[0]||(o[0]=e=>s.showLogin=!s.showLogin)},(0,d.zw)(s.showLogin?"註冊新帳號":"返回登入頁"),1)])])])])}const b={class:"mb-5"},_={for:"loginEmail"},x=(0,r._)("p",{class:"labeltxt"},"Email:",-1),y=(0,r._)("span",{class:"loginEmail-msg"},null,-1),T={class:"mb-6"},k={for:"loginPassword"},L=(0,r._)("p",{class:"labeltxt"},"密碼:",-1),U=(0,r._)("span",{class:"loginPassword-msg"},null,-1),P={class:"px-8"};function E(e,o,t,s,i,a){return(0,r.wg)(),(0,r.iD)("div",{onKeyup:o[3]||(o[3]=(0,n.D2)(((...e)=>a.handleLogin&&a.handleLogin(...e)),["enter"]))},[(0,r._)("form",null,[(0,r._)("div",b,[(0,r._)("label",_,[x,(0,r.wy)((0,r._)("input",{type:"email",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入Email",name:"loginEmail","onUpdate:modelValue":o[0]||(o[0]=e=>i.loginEmail=e)},null,512),[[n.nr,i.loginEmail,void 0,{trim:!0}]])]),y]),(0,r._)("div",T,[(0,r._)("label",k,[L,(0,r.wy)((0,r._)("input",{type:"password",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入密碼",name:"loginPassword","onUpdate:modelValue":o[1]||(o[1]=e=>i.loginPassword=e)},null,512),[[n.nr,i.loginPassword,void 0,{trim:!0}]])]),U]),(0,r._)("div",P,[(0,r._)("button",{type:"button",class:"mb-5 block w-full rounded bg-green-300 py-2 text-center",onClick:o[2]||(o[2]=(...e)=>a.handleLogin&&a.handleLogin(...e))}," 登入 ")])])],32)}t(7658);var S=t(4161),C=t(2492),D=t.n(C);const N=D().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",D().stopTimer),e.addEventListener("mouseleave",D().resumeTimer)}}),I=e=>{N.fire({icon:"success",title:e})},O=e=>{N.fire({icon:"success",title:e})},Z=()=>{N.fire({icon:"success",title:"新增成功"})},W=()=>{N.fire({icon:"success",title:"刪除成功"})},$=()=>{N.fire({icon:"success",title:"更改狀態成功"})},B=()=>{N.fire({icon:"success",title:"登出成功"})},j=(D().mixin({title:"請確認",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}),()=>{D().fire("錯誤！","請先填寫正確資料","error")}),F=(e="有地方出錯了！？")=>{D().fire("錯誤",e,"error")},V="https://todoo.5xcamp.us",A=e=>S.Z.post(`${V}/users`,e),z=e=>S.Z.post(`${V}/users/sign_in`,e),H=(e,o)=>{S.Z["delete"](`${V}/users/sign_out`,e).then((e=>{200===e.status&&(B(),localStorage.removeItem("userToken"),localStorage.removeItem("userNickName"),o())})).catch((e=>F(e.response.data.message)))},K=e=>S.Z.get(`${V}/todos`,e),M=(e,o)=>S.Z.post(`${V}/todos`,e,o),q=(e,o)=>S.Z["delete"](`${V}/todos/${e}`,o),Q=(e,o)=>S.Z.patch(`${V}/todos/${e}/toggle`,{},o);var G={name:"Log-In",data(){return{loginEmail:"",loginPassword:""}},methods:{resetForm(){this.loginEmail="",this.loginPassword=""},handleLogin(){if(this.loginEmail&&this.loginPassword){const e={user:{email:this.loginEmail,password:this.loginPassword}};z(e).then((e=>{I(e.data.message),localStorage.setItem("userToken",e.headers.authorization),localStorage.setItem("userNickname",e.data.nickname),this.resetForm(),this.$router.push({name:"todo"})})).catch((e=>{F(e.response.data.message)}))}else j()}}},Y=t(89);const J=(0,Y.Z)(G,[["render",E]]);var R=J;const X={class:"loginForm"},ee={class:"mb-5"},oe={for:"signUpEmail"},te=(0,r._)("p",{class:"labeltxt"},"Email:",-1),ne=(0,r._)("span",null,null,-1),se={class:"mb-5"},ie={for:"nickName"},ae=(0,r._)("p",{class:"labeltxt"},"暱稱:",-1),le=(0,r._)("span",null,null,-1),re={class:"mb-5"},de={for:"signUpPassword"},ce=(0,r._)("p",{class:"labeltxt"},"密碼:",-1),ue=(0,r._)("span",null,null,-1),me={class:"mb-8"},he={for:"confirmPassword"},pe=(0,r._)("p",{class:"labeltxt"},"再次輸入密碼:",-1),ge=(0,r._)("span",null,null,-1),fe={class:"px-8"};function we(e,o,t,s,i,a){return(0,r.wg)(),(0,r.iD)("div",{onKeyup:o[5]||(o[5]=(0,n.D2)(((...e)=>a.handleSignUp&&a.handleSignUp(...e)),["enter"]))},[(0,r._)("form",X,[(0,r._)("div",ee,[(0,r._)("label",oe,[te,(0,r.wy)((0,r._)("input",{type:"email",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入Email",name:"signUpEmail","onUpdate:modelValue":o[0]||(o[0]=e=>i.signUpEmail=e)},null,512),[[n.nr,i.signUpEmail,void 0,{trim:!0}]])]),ne]),(0,r._)("div",se,[(0,r._)("label",ie,[ae,(0,r.wy)((0,r._)("input",{type:"text",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入暱稱",name:"nickName","onUpdate:modelValue":o[1]||(o[1]=e=>i.nickName=e)},null,512),[[n.nr,i.nickName,void 0,{trim:!0}]])]),le]),(0,r._)("div",re,[(0,r._)("label",de,[ce,(0,r.wy)((0,r._)("input",{type:"password",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請輸入密碼",name:"signUpPassword","onUpdate:modelValue":o[2]||(o[2]=e=>i.signUpPassWord=e)},null,512),[[n.nr,i.signUpPassWord,void 0,{trim:!0}]])]),ue]),(0,r._)("div",me,[(0,r._)("label",he,[pe,(0,r.wy)((0,r._)("input",{type:"password",class:"w-full rounded border-2 py-2 indent-2",placeholder:"請再次輸入密碼",name:"confirmPassword","onUpdate:modelValue":o[3]||(o[3]=e=>i.confirmPassword=e)},null,512),[[n.nr,i.confirmPassword,void 0,{trim:!0}]])]),ge]),(0,r._)("div",fe,[(0,r._)("button",{type:"button",class:"mb-5 block w-full rounded bg-green-300 py-2 text-center",onClick:o[4]||(o[4]=(...e)=>a.handleSignUp&&a.handleSignUp(...e))}," 註冊 ")])])],32)}var ve={name:"Sign-Up",props:["showLogin"],data(){return{signUpEmail:"",nickName:"",signUpPassWord:"",confirmPassword:"",showLoginForm:this.showLogin}},methods:{resetForm(){this.signUpEmail="",this.nickName="",this.signUpPassWord="",this.confirmPassword=""},handleSignUp(){if(this.signUpEmail&&this.nickName&&this.signUpPassWord&&this.confirmPassword){const e={user:{email:this.signUpEmail,nickname:this.nickName,password:this.signUpPassWord}};A(e).then((e=>{O(e.data.message),this.resetForm(),this.moveToLogin()})).catch((e=>F(e.response.data.message)))}else j()},moveToLogin(){this.showLoginForm=!0,this.$emit("update:showLogin",this.showLoginForm)}}};const be=(0,Y.Z)(ve,[["render",we]]);var _e=be,xe={name:"HomeView",components:{LogIn:R,SignUp:_e},data(){return{showLogin:!0}},methods:{updateShowLogin(e){this.showLogin=e}}};const ye=(0,Y.Z)(xe,[["render",v]]);var Te=ye;const ke={class:"mx-auto max-w-7xl"};function Le(e,o,t,n,s,i){const a=(0,r.up)("Todo");return(0,r.wg)(),(0,r.iD)("div",ke,[(0,r.Wm)(a)])}const Ue={class:"mx-auto px-3 text-lg md:max-w-[80%] lg:max-w-[30%]"},Pe={class:"mb-10 text-xl"},Ee={class:"mb-5 flex justify-center"},Se={for:"todoInput"},Ce={key:0,class:"mt-10"},De=(0,r._)("h2",{class:"text-2xl"},"目前沒有待辦事項",-1),Ne=[De],Ie={key:1},Oe={class:"mb-6 flex justify-center gap-5 rounded border-2 border-slate-200"},Ze={class:"mb-10"},We={for:"todoItem",class:"flex w-full cursor-pointer items-center p-1 hover:bg-slate-200"},$e=["data-id","checked"],Be=["data-id"],je={class:"flex items-center justify-between border-t-2 pt-4"};function Fe(e,o,t,s,i,a){const l=(0,r.up)("font-awesome-icon"),c=(0,r.up)("LogOutBtn");return(0,r.wg)(),(0,r.iD)("div",Ue,[(0,r._)("h1",Pe,"哈囉 "+(0,d.zw)(i.nickName)+"～ 來做點事吧",1),(0,r._)("div",Ee,[(0,r._)("label",Se,[(0,r.wy)((0,r._)("input",{type:"text",class:"mr-5 rounded border-2 px-2 py-1 indent-2",placeholder:"請輸入待辦事項","onUpdate:modelValue":o[0]||(o[0]=e=>i.newTodo=e),onKeyup:o[1]||(o[1]=(0,n.D2)(((...e)=>a.handleAddTodo&&a.handleAddTodo(...e)),["enter"]))},null,544),[[n.nr,i.newTodo,void 0,{trim:!0}]])]),(0,r._)("button",{type:"button",class:"rounded border border-slate-700 px-2 py-1 hover:bg-gray-900 hover:text-white",onClick:o[2]||(o[2]=(...e)=>a.handleAddTodo&&a.handleAddTodo(...e))}," 加入 ")]),0===i.todos.length?((0,r.wg)(),(0,r.iD)("div",Ce,Ne)):((0,r.wg)(),(0,r.iD)("div",Ie,[(0,r._)("ul",Oe,[(0,r._)("li",{class:(0,d.C_)(["w-1/3 cursor-pointer rounded","all"===i.state?"active":""])},[(0,r._)("button",{onClick:o[3]||(o[3]=e=>a.changeTodoState("all")),class:"w-full px-3 py-1"},"全部")],2),(0,r._)("li",{class:(0,d.C_)(["w-1/3 cursor-pointer rounded","undone"===i.state?"active":""])},[(0,r._)("button",{onClick:o[4]||(o[4]=e=>a.changeTodoState("undone")),class:"w-full px-3 py-1"},"待完成")],2),(0,r._)("li",{class:(0,d.C_)(["w-1/3 cursor-pointer rounded","done"===i.state?"active":""])},[(0,r._)("button",{onClick:o[5]||(o[5]=e=>a.changeTodoState("done")),class:"w-full px-3 py-1"},"已完成")],2)]),(0,r._)("div",Ze,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.filterTodolist,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.id,class:"mb-3 flex items-center"},[(0,r._)("label",We,[(0,r._)("input",{type:"checkbox",id:"todoItem",class:"mr-10 h-5 w-5 cursor-pointer","data-id":e.id,checked:null!==e.completed_at,onClick:o[6]||(o[6]=(...e)=>a.handleToggleTodo&&a.handleToggleTodo(...e))},null,8,$e),(0,r._)("span",{class:(0,d.C_)([null===e.completed_at?"":"line-through","text-xl"])},(0,d.zw)(e.content),3)]),(0,r._)("button",{"data-id":e.id,onClick:o[7]||(o[7]=(...e)=>a.handleDelTodo&&a.handleDelTodo(...e))},[(0,r.Wm)(l,{icon:["far","rectangle-xmark"],"data-id":e.id,class:"cursor-pointer hover:scale-110 hover:text-red-400",size:"lg"},null,8,["data-id"])],8,Be)])))),128))])]),(0,r._)("div",je,[(0,r._)("p",null,"目前還有"+(0,d.zw)(i.undoneNum)+"件待完成",1)])])),(0,r.Wm)(c,{config:i.config},null,8,["config"])])}const Ve={class:"absolute right-8 top-10"};function Ae(e,o,t,n,s,i){return(0,r.wg)(),(0,r.iD)("div",Ve,[(0,r._)("button",{onClick:o[0]||(o[0]=(...e)=>i.handleLogout&&i.handleLogout(...e)),class:"rounded bg-blue-900 px-2 py-1 text-white hover:bg-blue-600"}," 登出 ")])}var ze={props:["config"],methods:{redirectHome(){this.$router.push({name:"home"})},handleLogout(){H(this.config,this.redirectHome)}}};const He=(0,Y.Z)(ze,[["render",Ae]]);var Ke=He,Me={components:{LogOutBtn:Ke},name:"Todo-List",data(){return{token:"",nickName:"",config:"",todos:[],newTodo:"",undoneNum:"",state:"all"}},methods:{getConfig(){this.token=localStorage.getItem("userToken"),this.nickName=localStorage.getItem("userNickname"),this.config={headers:{Authorization:this.token}}},getTodoList(){K(this.config).then((e=>{this.todos=e.data.todos,this.countUndone()})).catch((e=>F(e.response.data.message)))},addTodoList(){const e={todo:{content:this.newTodo}};M(e,this.config).then((()=>{Z(),this.getTodoList(),this.newTodo=""})).catch((e=>F(e.response.data.message)))},handleAddTodo(){this.newTodo&&this.config?this.addTodoList():j()},handleDelTodo(e){const o=e.target.dataset.id;o&&q(o,this.config).then((()=>{W(),this.getTodoList()})).catch((e=>F(e.response.data.message)))},handleToggleTodo(e){const o=e.target.dataset.id;Q(o,this.config).then((()=>{$(),this.getTodoList(),this.countUndone()})).catch((e=>F(e.response.data.message)))},countUndone(){const e=this.todos.filter((e=>null===e.completed_at));this.undoneNum=e.length},changeTodoState(e){this.state=e},setTodoByState(){return"all"===this.state?[...this.todos].reverse():"undone"===this.state?this.todos.filter((e=>null===e.completed_at)).reverse():"done"===this.state?this.todos.filter((e=>null!==e.completed_at)).reverse():[...this.todos].reverse()}},mounted(){this.getConfig(),this.getTodoList()},computed:{filterTodolist(){return this.setTodoByState()}}};const qe=(0,Y.Z)(Me,[["render",Fe]]);var Qe=qe,Ge={name:"TodoView",components:{Todo:Qe}};const Ye=(0,Y.Z)(Ge,[["render",Le]]);var Je=Ye;const Re=[{path:"/",name:"home",component:Te,meta:{title:"MyTodoList-首頁"}},{path:"/todo",name:"todo",component:Je,meta:{title:"MyTodoList-待辦事項",requiresAuth:!0}}],Xe=(0,l.p7)({history:(0,l.r5)(),routes:Re});Xe.beforeEach(((e,o,t)=>{const n=localStorage.getItem("userToken"),s=e.matched.some((e=>e.meta.requiresAuth));s&&!n?t("/"):t()})),Xe.beforeEach(((e,o,t)=>{window.document.title=e.meta.title,t()}));var eo=Xe;const oo={class:"mt-28 font-sans"};function to(e,o){const t=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",oo,[(0,r.Wm)(t)])}const no={},so=(0,Y.Z)(no,[["render",to]]);var io=so;s.vI.add(a.QQm);const ao=(0,n.ri)(io);ao.use(eo).component("font-awesome-icon",i.GN).mount("#app")}},o={};function t(n){var s=o[n];if(void 0!==s)return s.exports;var i=o[n]={exports:{}};return e[n].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(o,n,s,i){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],i=e[c][2];for(var l=!0,r=0;r<n.length;r++)(!1&i||a>=i)&&Object.keys(t.O).every((function(e){return t.O[e](n[r])}))?n.splice(r--,1):(l=!1,i<a&&(a=i));if(l){e.splice(c--,1);var d=s();void 0!==d&&(o=d)}}return o}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,s,i]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var s,i,a=n[0],l=n[1],r=n[2],d=0;if(a.some((function(o){return 0!==e[o]}))){for(s in l)t.o(l,s)&&(t.m[s]=l[s]);if(r)var c=r(t)}for(o&&o(n);d<a.length;d++)i=a[d],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(c)},n=self["webpackChunkmy_todolist"]=self["webpackChunkmy_todolist"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(927)}));n=t.O(n)})();
//# sourceMappingURL=app.f2a5650a.js.map