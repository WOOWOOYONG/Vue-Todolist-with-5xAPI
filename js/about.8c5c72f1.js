"use strict";(self["webpackChunkmy_todolist"]=self["webpackChunkmy_todolist"]||[]).push([[443],{8421:function(t,o,e){e.r(o),e.d(o,{default:function(){return j}});var n=e(3396);const s={class:"max-w-7xl mx-auto"};function d(t,o,e,d,l,i){const a=(0,n.up)("Todo");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(a)])}var l=e(7139),i=e(9242);const a={class:"mx-auto max-w-[30%] text-lg"},c={class:"mb-10 text-xl"},r={class:"mb-5 flex justify-center"},h={for:"todoInput"},u={key:0,class:"mt-10"},g=(0,n._)("h2",{class:"text-2xl"},"目前沒有待辦事項",-1),m=[g],p={key:1},f={class:"mb-6 flex justify-center gap-5 rounded border-2 border-slate-200"},T={class:"mb-10"},b={for:"todoItem",class:"flex w-full cursor-pointer items-center p-1 hover:bg-slate-100"},w=["data-id","checked"],_=["data-id"],v={class:"flex items-center justify-between border-t-2 pt-4"};function x(t,o,e,s,d,g){const x=(0,n.up)("font-awesome-icon"),k=(0,n.up)("LogOutBtn");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("h1",c,"哈囉 "+(0,l.zw)(d.nickName)+"～ 來做點事吧",1),(0,n._)("div",r,[(0,n._)("label",h,[(0,n.wy)((0,n._)("input",{type:"text",class:"mr-5 rounded border-2 px-2 py-1 indent-2",placeholder:"請輸入待辦事項","onUpdate:modelValue":o[0]||(o[0]=t=>d.newTodo=t),onKeyup:o[1]||(o[1]=(0,i.D2)(((...t)=>g.handleAddTodo&&g.handleAddTodo(...t)),["enter"]))},null,544),[[i.nr,d.newTodo,void 0,{trim:!0}]])]),(0,n._)("button",{type:"button",class:"rounded border border-slate-700 px-2 py-1 hover:bg-gray-900 hover:text-white",onClick:o[2]||(o[2]=(...t)=>g.handleAddTodo&&g.handleAddTodo(...t))}," 加入 ")]),0===d.todos.length?((0,n.wg)(),(0,n.iD)("div",u,m)):((0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("ul",f,[(0,n._)("li",{class:(0,l.C_)(["w-1/3 cursor-pointer rounded","all"===d.state?"active":""])},[(0,n._)("button",{onClick:o[3]||(o[3]=t=>g.changeTodoState("all")),class:"w-full px-3 py-1"},"全部")],2),(0,n._)("li",{class:(0,l.C_)(["w-1/3 cursor-pointer rounded","undone"===d.state?"active":""])},[(0,n._)("button",{onClick:o[4]||(o[4]=t=>g.changeTodoState("undone")),class:"w-full px-3 py-1"},"待完成")],2),(0,n._)("li",{class:(0,l.C_)(["w-1/3 cursor-pointer rounded","done"===d.state?"active":""])},[(0,n._)("button",{onClick:o[5]||(o[5]=t=>g.changeTodoState("done")),class:"w-full px-3 py-1"},"已完成")],2)]),(0,n._)("div",T,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(g.filterTodolist,(t=>((0,n.wg)(),(0,n.iD)("li",{key:t.id,class:"mb-3 flex items-center"},[(0,n._)("label",b,[(0,n._)("input",{type:"checkbox",id:"todoItem",class:"mr-10 h-5 w-5 cursor-pointer","data-id":t.id,checked:null!==t.completed_at,onClick:o[6]||(o[6]=(...t)=>g.handleToggleTodo&&g.handleToggleTodo(...t))},null,8,w),(0,n._)("span",{class:(0,l.C_)([null===t.completed_at?"":"line-through","text-xl"])},(0,l.zw)(t.content),3)]),(0,n._)("button",{"data-id":t.id,onClick:o[7]||(o[7]=(...t)=>g.handleDelTodo&&g.handleDelTodo(...t))},[(0,n.Wm)(x,{icon:["far","rectangle-xmark"],"data-id":t.id,class:"cursor-pointer hover:scale-110 hover:bg-amber-200",size:"lg"},null,8,["data-id"])],8,_)])))),128))])]),(0,n._)("div",v,[(0,n._)("p",null,"目前還有"+(0,l.zw)(d.undoneNum)+"件待完成",1),(0,n._)("button",{onClick:o[8]||(o[8]=(...t)=>g.handleDelAllTodo&&g.handleDelAllTodo(...t)),class:"rounded bg-orange-400 px-2 py-1 font-bold text-white hover:bg-orange-600"}," 清除已完成事項 ")])])),(0,n.Wm)(k,{config:d.config},null,8,["config"])])}var k=e(8332),y=e(471);const C={class:"absolute top-10 right-48"};function D(t,o,e,s,d,l){return(0,n.wg)(),(0,n.iD)("div",C,[(0,n._)("button",{onClick:o[0]||(o[0]=(...t)=>l.handleLogout&&l.handleLogout(...t)),class:"bg-blue-900 py-1 px-2 rounded text-white hover:bg-blue-600"}," 登出 ")])}e(7658);var L={props:["config"],methods:{redirectHome(){this.$router.push({name:"home"})},handleLogout(){console.log(this.config),(0,k.ni)(this.config,this.redirectHome)}}},A=e(89);const S=(0,A.Z)(L,[["render",D]]);var N=S,z={components:{LogOutBtn:N},name:"Todo-list",data(){return{token:"",nickName:"",config:"",todos:[],newTodo:"",undoneNum:"",state:"all"}},methods:{getConfig(){this.token=localStorage.getItem("userToken"),this.nickName=localStorage.getItem("userNickname"),this.config={headers:{Authorization:this.token}}},getTodoList(){(0,k.dC)(this.config).then((t=>{this.todos=t.data.todos,this.countUndone()})).catch((t=>console.log(t)))},addTodoList(){const t={todo:{content:this.newTodo}};(0,k.rk)(t,this.config).then((()=>{(0,y.yZ)(),this.getTodoList(),this.newTodo=""})).catch((t=>console.log(t)))},handleAddTodo(){this.newTodo&&this.config?this.addTodoList():(0,y.Y0)()},handleDelTodo(t){const o=t.target.dataset.id;o&&(0,k.yr)(o,this.config).then((()=>{(0,y.Ag)(),this.getTodoList()})).catch((t=>console.log(t)))},handleDelAllTodo(){const t=this.todos.filter((t=>null!==t.completed_at));if(t.length>0){const o=()=>{(0,k.oD)(t,this.config,this.getTodoList)};(0,y.Ud)(o)}else(0,y.$0)()},handleToggleTodo(t){const o=t.target.dataset.id;(0,k.CA)(o,this.config).then((()=>{(0,y.dk)(),this.getTodoList(),this.countUndone()})).catch((t=>console.log(t)))},countUndone(){const t=this.todos.filter((t=>null===t.completed_at));this.undoneNum=t.length},changeTodoState(t){this.state=t},setTodoByState(){return"all"===this.state?[...this.todos].reverse():"undone"===this.state?this.todos.filter((t=>null===t.completed_at)).reverse():"done"===this.state?this.todos.filter((t=>null!==t.completed_at)).reverse():[...this.todos].reverse()}},mounted(){this.getConfig(),this.getTodoList()},computed:{filterTodolist(){return this.setTodoByState()}}};const I=(0,A.Z)(z,[["render",x]]);var U=I,B={name:"TodoView",components:{Todo:U}};const Z=(0,A.Z)(B,[["render",d]]);var j=Z}}]);
//# sourceMappingURL=about.8c5c72f1.js.map